<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Post_Escalation_To_Chatter</name>
        <label>Post Escalation To Chatter</label>
        <locationX>656</locationX>
        <locationY>70</locationY>
        <actionName>chatterPost</actionName>
        <actionType>chatterPost</actionType>
        <inputParameters>
            <name>text</name>
            <value>
                <elementReference>ChatterTemplate</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>subjectNameOrId</name>
            <value>
                <elementReference>CaseId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>visibility</name>
            <value>
                <stringValue>internalUsers</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Post_Escalation_To_Chatter_No_Manager</name>
        <label>Post Escalation To Chatter No Manager</label>
        <locationX>853</locationX>
        <locationY>59</locationY>
        <actionName>chatterPost</actionName>
        <actionType>chatterPost</actionType>
        <inputParameters>
            <name>text</name>
            <value>
                <elementReference>ChatterTemplate</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>subjectNameOrId</name>
            <value>
                <elementReference>CaseId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>visibility</name>
            <value>
                <stringValue>internalUsers</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <assignments>
        <name>Assign_Resolution</name>
        <label>Assign Resolution</label>
        <locationX>553</locationX>
        <locationY>194</locationY>
        <assignmentItems>
            <assignToReference>varResolution</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varTarget</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formulaTargetTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varTargetType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Resolution</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Case_Owner_User_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Restore</name>
        <label>Assign Restore</label>
        <locationX>421</locationX>
        <locationY>191</locationY>
        <assignmentItems>
            <assignToReference>varRestore</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varTarget</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formulaTargetTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varTargetType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Restore</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Case_Owner_User_Record</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Account_Specific_Rule</name>
        <label>Account Specific Rule</label>
        <locationX>236</locationX>
        <locationY>235</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Discovery_Communications_Europe_Ltd</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.AccountId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>001i000001QcyL0AAJ</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Pause</targetReference>
            </connector>
            <label>Discovery Communications Europe Ltd</label>
        </rules>
    </decisions>
    <decisions>
        <name>Conditions_still_true</name>
        <label>Conditions still true?</label>
        <locationX>453</locationX>
        <locationY>522</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Restore_Still_Blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Restore_Communicated_to_Customer__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Restore</targetReference>
            </connector>
            <label>Restore Still Blank</label>
        </rules>
        <rules>
            <name>Resolve_Still_Blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Resolution_Communicated_to_Customer__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Resolution</targetReference>
            </connector>
            <label>Resolve Still Blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>Did_we_get_Manager</name>
        <label>Did we get Manager?</label>
        <locationX>880</locationX>
        <locationY>256</locationY>
        <defaultConnector>
            <targetReference>Post_Escalation_To_Chatter_No_Manager</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Manager</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Owner_Manager</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Post_Escalation_To_Chatter</targetReference>
            </connector>
            <label>Yes Manager</label>
        </rules>
    </decisions>
    <decisions>
        <name>Did_we_get_User</name>
        <label>Did we get User?</label>
        <locationX>745</locationX>
        <locationY>390</locationY>
        <defaultConnector>
            <targetReference>Post_Escalation_To_Chatter_No_Manager</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Owner_User_Record</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Case_Owner_Manager</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Priority</name>
        <label>Priority</label>
        <locationX>33</locationX>
        <locationY>333</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>X1_Critical</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>1-Critical</stringValue>
                </rightValue>
            </conditions>
            <label>1-Critical</label>
        </rules>
        <rules>
            <name>X2_High</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>2-High</stringValue>
                </rightValue>
            </conditions>
            <label>2-High</label>
        </rules>
        <rules>
            <name>X3_Medium</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>3-Medium</stringValue>
                </rightValue>
            </conditions>
            <label>3-Medium</label>
        </rules>
        <rules>
            <name>X4_Low</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>4-Low</stringValue>
                </rightValue>
            </conditions>
            <label>4-Low</label>
        </rules>
    </decisions>
    <decisions>
        <name>Product_Line_Specific_Rule</name>
        <label>Product Line Specific Rule</label>
        <locationX>236</locationX>
        <locationY>55</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Landmark_Sales_Cloud</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Product_Family__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Landmark Sales Cloud</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Account_Specific_Rule</targetReference>
            </connector>
            <label>Landmark Sales Cloud</label>
        </rules>
    </decisions>
    <description>sends emails when escalation milestones are about to be missed.  Currently only for Landmark Sales Cloud that gives early warning to pass to Managed Services team.</description>
    <formulas>
        <name>formulaTargetTime</name>
        <dataType>String</dataType>
        <expression>IF (
AND ( {!varRestore},  ISPICKVAL( {!Case_Record.Priority}, &quot;1-Critical&quot; ) ), &quot;2 Hours&quot;,
IF (
AND ( {!varRestore},  ISPICKVAL( {!Case_Record.Priority}, &quot;2-High&quot; ) ), &quot;1 Day&quot;,
IF (
AND ( {!varRestore},  ISPICKVAL( {!Case_Record.Priority}, &quot;3-Medium&quot; ) ), &quot;2 Days&quot;,
IF (
AND ( {!varResolution},  ISPICKVAL( {!Case_Record.Priority}, &quot;1-Critical&quot; ) ), &quot;1 Day&quot;,
IF (
AND ( {!varResolution},  ISPICKVAL( {!Case_Record.Priority}, &quot;2-High&quot; ) ), &quot;10 Days&quot;,
IF (
AND ( {!varResolution},  ISPICKVAL( {!Case_Record.Priority}, &quot;3-Medium&quot; ) ), &quot;30 Days&quot;,
&quot;Error - Target Unknown&quot;
))))))</expression>
    </formulas>
    <interviewLabel>Case - Escalation Management {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Case - Escalation Management</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <description>this is getting dumb, why don&apos;t we have a manager ID on the Case?</description>
        <name>Case_Owner_Manager</name>
        <label>Case Owner Manager</label>
        <locationX>885</locationX>
        <locationY>384</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Did_we_get_Manager</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Case_Owner_User_Record.ManagerId</elementReference>
            </value>
        </filters>
        <object>User</object>
    </recordLookups>
    <recordLookups>
        <name>Case_Owner_User_Record</name>
        <label>Case Owner User Record</label>
        <locationX>634</locationX>
        <locationY>387</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Did_we_get_User</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Case_Record.OwnerId</elementReference>
            </value>
        </filters>
        <object>User</object>
    </recordLookups>
    <recordLookups>
        <name>Case_Record</name>
        <label>Case Record</label>
        <locationX>147</locationX>
        <locationY>54</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Product_Line_Specific_Rule</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CaseId</elementReference>
            </value>
        </filters>
        <object>Case</object>
    </recordLookups>
    <startElementReference>Case_Record</startElementReference>
    <status>Draft</status>
    <textTemplates>
        <name>ChatterTemplate</name>
        <text>&lt;p&gt;@[{!Case_Record.OwnerId}] This case is approaching its SLA limits for {!varTargetType} Time and needs to be passed to Managed Services.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Target - {!varTarget}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;CC: @[{!Case_Owner_Manager.Id}]&lt;/p&gt;&lt;p&gt;#[MS Escalation Required]&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>ChatterTemplateNoManager</name>
        <text>&lt;p&gt;@[{!Case_Record.OwnerId}] This case is approaching its SLA limits for {!varTargetType} Time and needs to be passed to Managed Services.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Target - {!varTarget}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;#[MS Escalation Required]&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>CaseId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varResolution</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>varRestore</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>varTarget</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varTargetType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>varType</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <waits>
        <description>pause before warning case owner time is almost up</description>
        <name>Pause</name>
        <label>Pause</label>
        <locationX>246</locationX>
        <locationY>448</locationY>
        <defaultConnector>
            <targetReference>Conditions_still_true</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Path</defaultConnectorLabel>
        <waitEvents>
            <name>Critical_Resolution</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>1-Critical</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Case_Record.Resolution_Communicated_to_Customer__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Conditions_still_true</targetReference>
            </connector>
            <eventType>AlarmEvent</eventType>
            <inputParameters>
                <name>AlarmTime</name>
                <value>
                    <elementReference>Case_Record.Date_Time_Status_Open__c</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffset</name>
                <value>
                    <numberValue>1.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffsetUnit</name>
                <value>
                    <stringValue>Days</stringValue>
                </value>
            </inputParameters>
            <label>Critical + Resolution</label>
        </waitEvents>
        <waitEvents>
            <name>Critical_Restore</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Restore_Date_Time__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>1-Critical</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Conditions_still_true</targetReference>
            </connector>
            <eventType>AlarmEvent</eventType>
            <inputParameters>
                <name>AlarmTime</name>
                <value>
                    <elementReference>Case_Record.Date_Time_Status_Open__c</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffset</name>
                <value>
                    <numberValue>1.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffsetUnit</name>
                <value>
                    <stringValue>Hours</stringValue>
                </value>
            </inputParameters>
            <label>Critical + Restore</label>
        </waitEvents>
        <waitEvents>
            <name>High_Resolution</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>2-High</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Case_Record.Resolution_Communicated_to_Customer__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Conditions_still_true</targetReference>
            </connector>
            <eventType>AlarmEvent</eventType>
            <inputParameters>
                <name>AlarmTime</name>
                <value>
                    <elementReference>Case_Record.Date_Time_Status_Open__c</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffset</name>
                <value>
                    <numberValue>5.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffsetUnit</name>
                <value>
                    <stringValue>Days</stringValue>
                </value>
            </inputParameters>
            <label>High + Resolution</label>
        </waitEvents>
        <waitEvents>
            <name>High_Restore</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>2-High</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Case_Record.Restore_Communicated_to_Customer__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Conditions_still_true</targetReference>
            </connector>
            <eventType>AlarmEvent</eventType>
            <inputParameters>
                <name>AlarmTime</name>
                <value>
                    <elementReference>Case_Record.Date_Time_Status_Open__c</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffset</name>
                <value>
                    <numberValue>1.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffsetUnit</name>
                <value>
                    <stringValue>Days</stringValue>
                </value>
            </inputParameters>
            <label>High + Restore</label>
        </waitEvents>
        <waitEvents>
            <name>Medium_Resolution</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>3-Medium</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Case_Record.Resolution_Communicated_to_Customer__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Conditions_still_true</targetReference>
            </connector>
            <eventType>AlarmEvent</eventType>
            <inputParameters>
                <name>AlarmTime</name>
                <value>
                    <elementReference>Case_Record.Date_Time_Status_Open__c</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffset</name>
                <value>
                    <numberValue>15.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffsetUnit</name>
                <value>
                    <stringValue>Days</stringValue>
                </value>
            </inputParameters>
            <label>Medium + Resolution</label>
        </waitEvents>
        <waitEvents>
            <name>Medium_Restore</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Case_Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>3-Medium</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Case_Record.Restore_Communicated_to_Customer__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Conditions_still_true</targetReference>
            </connector>
            <eventType>AlarmEvent</eventType>
            <inputParameters>
                <name>AlarmTime</name>
                <value>
                    <elementReference>Case_Record.Date_Time_Status_Open__c</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffset</name>
                <value>
                    <numberValue>2.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffsetUnit</name>
                <value>
                    <stringValue>Days</stringValue>
                </value>
            </inputParameters>
            <label>Medium + Restore</label>
        </waitEvents>
    </waits>
</Flow>
